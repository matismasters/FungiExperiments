---
import { getExperiment } from "../../db/experiments";
import Error from "../../components/Error.astro"
import UploadIteration from "../../components/UploadIteration.astro"

const experimentID = Astro.url.searchParams.get('id') || '';

const {data:experiment,error:err} = await getExperiment(experimentID)
const experimentDoesNotExist = err
const experimentFinished = experiment[0]?.exp_terminado
---

{
experimentDoesNotExist?(
    <Error title="Experimento No Encontrado"/>
):
experimentFinished?(
    <Error title="El experimento ya estÃ¡ finalizado"/>
):
(   
    <UploadIteration/>
)
}